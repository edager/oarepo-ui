{# render semantic-ui grid #}
{% macro render_grid(layout, data, record, className, style, rows, columns, columnsPerRow) %}
    {% set cols=number_to_word(columnsPerRow) + ' column' if columnsPerRow else '' %}
    <div class="ui {{ className }} grid {{ 'container' if not rows else '' }} {{ cols }}">
        {% if rows %}
            {% for r in rows %}
                {{ oarepo_ui.render_layout(layout={'component': 'row_wrapper', 'row': r}, data=data, record=record) }}
            {% endfor %}
        {% elif columns %}
            {% for c in columns %}
                {{ oarepo_ui.render_layout(layout={'component': 'column_wrapper', 'column': c}, data=data, record=record) }}
            {% endfor %}
        {% else %}
            <div class="error">Error rendering grid: either row or columns expected, got {{ layout|pprint }}</div>
        {% endif %}
    </div>
{% endmacro %}


{% macro render_row_wrapper(layout, data, record, className, style, row) %}
    {% if row.component == 'row' or row.component is none or row.component is not defined %}
        {{ oarepo_ui.render_layout(layout=row|push(component='row'), data=data, record=record) }}
    {% else %}
        {{ oarepo_ui.render_layout(
            layout={
                'component': 'row',
                'className': 'stretched',
                'columns': [row]
            }, data=data, record=record) }}
    {% endif %}
{% endmacro %}

{% macro render_column_wrapper(layout, data, record, className, style, column) %}
    {% if column.component == 'column' or column.component is none or column.component is not defined %}
        {{ oarepo_ui.render_layout(layout=column, data=data, record=record) }}
    {% else %}
        {{ oarepo_ui.render_layout(
            layout={
                'component': 'column',
                'items': [column],
                'className': 'stretched',
            }, data=data, record=record) }}
    {% endif %}
{% endmacro %}

{# render semantic-ui grid column #}
{% macro render_column(layout, data, record, className, style, items) %}
    <div class="column {{ className }}">
        {% for it in items %}
            {{ oarepo_ui.render_layout(layout=it, data=data, record=record) }}
        {% endfor %}
    </div>
{% endmacro %}

{# render semantic-ui grid row #}
{% macro render_row(layout, data, record, className, style, items, columns) %}
    <div class="row {{ className }} {{ cols }}">
        {% for c in columns %}
            {{ oarepo_ui.render_layout(layout={'component': 'column_wrapper', 'column': c}, data=data, record=record) }}
        {% endfor %}
    </div>
{% endmacro %}

{# render unknown component #}
{% macro render_unknown(layout, data, record, className, style) %}
    <div class="{{ className }}" style="color: red; {{ style }}">Unknown component {{ layout|pprint }}:
        kwargs: {{ kwargs|pprint }}</div>
{% endmacro %}

{# placeholder component #}
{% macro render_placeholder(layout, data, record, className, style) %}
    <div class="ui {{ className }}"
         style="{{ style }}; background-color: rgba(200, 200, 100, 0.2); border: 1px dotted lightgrey">
        <div style="background-color: white; padding: 20px">
            <div class="ui placeholder">
                <div class="image header">
                    <div class="line"></div>
                    <div class="line"></div>
                </div>
            </div>
        </div>
    </div>
{% endmacro %}